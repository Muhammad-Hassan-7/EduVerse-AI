<section class="bg-white rounded-xl shadow-lg p-8">
  <h2 class="text-2xl font-semibold text-gray-900 mb-6">Change Password</h2>

  <form
    [formGroup]="changePasswordForm"
    (ngSubmit)="onSubmit()"
    class="space-y-6"
  >
    <!-- Old Password (Hidden for Super Admins) -->
    <div *ngIf="!isSuperAdmin">
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Old Password
      </label>
      <div class="relative">
        <input
          [type]="showOldPassword ? 'text' : 'password'"
          formControlName="oldPassword"
          placeholder="Enter old password"
          class="mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2 pr-12 text-gray-900 shadow-sm focus:border-blue-950 focus:ring focus:ring-blue-900 focus:ring-opacity-40"
        />
        <button
          type="button"
          (click)="toggleOldPassword()"
          class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700"
        >
          <i class="fas" [ngClass]="showOldPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
        </button>
      </div>
      <p
        *ngIf="
          changePasswordForm.get('oldPassword')?.touched &&
          changePasswordForm.get('oldPassword')?.invalid
        "
        class="mt-1 text-red-500 text-sm"
      >
        Old password must be at least 6 characters.
      </p>
    </div>

    <!-- New Password -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        New Password
      </label>
      <div class="relative">
        <input
          [type]="showNewPassword ? 'text' : 'password'"
          formControlName="password"
          placeholder="Enter new password"
          class="mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2 pr-12 text-gray-900 shadow-sm focus:border-blue-950 focus:ring focus:ring-blue-900 focus:ring-opacity-40"
        />
        <button
          type="button"
          (click)="toggleNewPassword()"
          class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700"
        >
          <i class="fas" [ngClass]="showNewPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
        </button>
      </div>
    </div>

    <!-- Confirm Password -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Confirm Password
      </label>
      <div class="relative">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          formControlName="confirmPassword"
          placeholder="Confirm password"
          class="mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2 pr-12 text-gray-900 shadow-sm focus:border-blue-950 focus:ring focus:ring-blue-900 focus:ring-opacity-40"
        />
        <button
          type="button"
          (click)="toggleConfirmPassword()"
          class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700"
        >
          <i class="fas" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
        </button>
      </div>
      <p
        *ngIf="changePasswordForm.hasError('mismatch') && changePasswordForm.get('confirmPassword')?.touched"
        class="mt-1 text-red-500 text-sm"
      >
        Passwords do not match.
      </p>
    </div>

    <!-- Buttons Row -->
    <div class="pt-4 flex space-x-3 justify-end">
      <app-button
        customColor="bg-blue-950 text-white hover:bg-gray-500 cursor-pointer px-6 py-2 rounded-lg"
        size="md"
        type="submit"
      >
        Change Password
      </app-button>

      <app-button
        customColor="bg-gray-200 text-gray-700 hover:bg-gray-300 px-6 py-2 rounded-lg"
        size="md"
        type="button"
      >
        Cancel
      </app-button>
    </div>
  </form>
</section>
