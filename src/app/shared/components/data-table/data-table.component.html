<div class="bg-white rounded-lg shadow-sm border border-gray-200">
  <!-- Header -->
  <div class="flex items-center justify-between p-6 border-b border-gray-200">
    <h3 class="text-lg font-semibold text-gray-900">
      {{ title }}
    </h3>

    <app-button
      *ngIf="showViewAll"
      (buttonClick)="onViewAllClick()"
      customColor="bg-blue-950 text-white hover:bg-gray-500 cursor-pointer focus:ring-blue-800"
    >
      View All
    </app-button>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="bg-blue-100">
        <tr>
          <th
            *ngFor="let col of columns"
            class="px-6 py-3 text-left text-sm font-medium text-gray-500 tracking-wider"
          >
            {{ col.label }}
          </th>
          <th
            *ngIf="enableActions"
            class="px-6 py-3 text-left text-sm font-medium text-gray-500 tracking-wider"
          >
            Actions
          </th>
        </tr>
      </thead>

      <tbody class="bg-white divide-y divide-gray-200">
        <tr
          *ngFor="let row of pagedRows"
          class="hover:bg-gray-50"
          [class.cursor-pointer]="rowClickable"
        >
          <td
            *ngFor="let col of columns"
            class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
          >
            <!-- Avatar -->
            <ng-container *ngIf="col.type === 'avatar'">
              <div class="flex items-center">
                <div
                  class="h-10 w-10 rounded-full bg-gray-500 flex items-center justify-center text-white font-semibold text-sm"
                >
                  {{ row[col.key] }}
                </div>
                <div class="ml-4">
                  <div class="text-sm font-medium text-gray-900">
                    {{ row["name"] }}
                  </div>
                  <div class="text-sm text-gray-500">
                    {{ row["email"] }}
                  </div>
                </div>
              </div>
            </ng-container>

            <!-- Progress -->
            <ng-container *ngIf="col.type === 'progress'">
              <div class="flex items-center space-x-2">
                <div class="w-32 bg-gray-200 rounded-full h-2.5">
                  <div
                    class="h-2.5 rounded-full"
                    [ngClass]="getProgressColor(row[col.key])"
                    [style.width.%]="row[col.key]"
                  ></div>
                </div>
                <span class="text-sm font-medium">{{ row[col.key] }}%</span>
              </div>
            </ng-container>

            <!-- Badge -->
            <ng-container *ngIf="col.type === 'badge'">
              <span
                class="inline-flex px-2 py-1 text-xs font-semibold rounded-full"
                [ngClass]="col.badgeColors?.[row[col.key]]"
              >
                {{ row[col.key] }}
              </span>
            </ng-container>

            <!-- Date -->
            <ng-container *ngIf="col.type === 'date'">
              {{ row[col.key] | date : "yyyy-MM-dd" }}
            </ng-container>

            <!-- Default text -->
            <ng-container *ngIf="!col.type || col.type === 'text'">
              {{ row[col.key] || "" }}
            </ng-container>

            <!-- Action as button (default for other tables) -->
            <ng-container *ngIf="col.type === 'action'">
              <app-button
                size="sm"
                customColor="bg-blue-950 hover:bg-blue-800 text-white"
                (buttonClick)="onActionClick(row)"
              >
                View
              </app-button>
            </ng-container>

            <!-- Action as link -->
            <ng-container *ngIf="col.type === 'link'">
              <a
                [routerLink]="[col.link, row.id]"
                class="text-blue-500 hover:underline font-medium"
              >
                View Details
              </a>
            </ng-container>
          </td>

          <td class="px-6 py-4 text-center" *ngIf="enableActions">
            <button
              *ngIf="visibleActions.includes('edit')"
              class="text-blue-900 hover:text-blue-600 mr-3"
              (click)="onEdit(row)"
            >
              <i class="fas fa-edit"></i>
            </button>

            <button
              *ngIf="visibleActions.includes('delete')"
              class="text-red-600 hover:text-red-800"
              (click)="onDelete(row)"
            >
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination Footer -->
  <div class="p-4 border-t border-gray-200 flex justify-end">
    <app-pagination
      *ngIf="totalItems > pageSize"
      [currentPage]="currentPage"
      [pageSize]="pageSize"
      [totalItems]="totalItems"
      (pageChange)="pageChange.emit($event)"
    >
    </app-pagination>
  </div>
</div>
